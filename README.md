# 🧱 ExtensionBlocker([🔗 사이트 방문하기](http://extension-blocker-env-1.eba-yyxrjve3.us-east-1.elasticbeanstalk.com/))
**✋허용되지 않은 확장자? 차단!!**
> 📄 프로젝트 상세 문서는 [📘 Notion 링크 바로가기](https://jamm0316.notion.site/215cda6b86ff80baa4a1c08c1f2868e1#215cda6b86ff804d8e44e2840b05ae8a) 에서 확인할 수 있습니다.
- ExtensionBlocker는 관리자가 허용하지 않은 파일 확장자를 등록 및 관리하여, 사용자로부터의 파일 업로드를 제어할 수 있는 보안 유틸리티입니다.
- 고정 확장자 관리 및 커스텀 확장자 등록/삭제가 가능하며, 고정확장자를 제외한 최대 200개까지 커스텀 확장자를 차단할 수 있습니다.

<br>

## 🛠 Tech Stack
- Frontend: Thymeleaf, jQuery, Bootstrap 5
- Backend: Java 17, Spring Boot 3.5.0, Spring Data JPA
- Database: PostgreSQL
- Infra: AWS Elastic Beanstalk

<br>

## 🧱 Architecture
<img width="1230" alt="image" src="https://github.com/user-attachments/assets/1144dfa6-fcb6-4eed-956e-6e790d769d07" />

<br>

> - 전체 구조: Controller - Service - Repository 레이어로 구성된 전형적인 Spring MVC 아키텍처.
> - 모든 예외는 GlobalExceptionHandler 통해 처리되며, 확장자 등록/삭제 로직에 대한 유효성 검증이 Service 단에서 수행됨.

<br>

## 🎯 Trouble Shooting
ExtensionBlocker 개발 및 배포 중 마주친 주요 문제와 해결 과정입니다.
👉 [TroubleShooting 바로가기](https://jamm0316.notion.site/215cda6b86ff80979a93dc08ca8c1170?source=copy_link)


## 🧪 주요 기능
<h3>✅ 주요 기능</h3>
<table border="1" cellspacing="0" cellpadding="8" style="border-collapse: collapse; text-align: left; width: 100%;">
  <thead style="background-color: #2b2b2b; color: white;">
    <tr>
      <th>기능</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>고정 확장자 차단</td>
      <td><code>.exe</code>, <code>.bat</code> 등 기본적으로 차단해야 할 확장자를 화면에서 확인하고 관리 가능</td>
    </tr>
    <tr>
      <td>커스텀 확장자 등록</td>
      <td>관리자가 입력한 확장자를 차단 리스트에 추가 (중복 및 유효성 검사 포함)</td>
    </tr>
    <tr>
      <td>커스텀 확장자 삭제</td>
      <td>등록된 확장자를 삭제하면 <code>isBanned = false</code> 처리 (논리 삭제)</td>
    </tr>
    <tr>
      <td>최대 등록 수 제한</td>
      <td>커스텀 확장자는 200개까지 등록 가능. 초과 시 예외 처리</td>
    </tr>
  </tbody>
</table>

<br>

## 🧭 개발 환경
- IDE: IntelliJ IDEA
- JDK: Java 17
- OS: macOS
- 배포: Elastic Beanstalk (Nginx 설정 포함)

<br>

## 🖥️ UI 화면
<img width="359" alt="image" src="https://github.com/user-attachments/assets/9528b886-f7f2-4e0b-8f62-1072b173289a" />

### ✅ 고정 확장자 관리
	• 체크된 확장자는 차단 상태, 체크 해제 시 허용 상태
	• 프론트에서 체크박스 상태로 실시간 반영됨

### ➕ 커스텀 확장자 추가
	• 중복 불가, 최대 20자 제한, 유효성 검사(소문자+숫자)
	• 등록 시 자동 소문자 변환

### ❌ 커스텀 확장자 삭제
	• 삭제 시 DB에서 제거되지 않고 isBanned = false 처리
	• 삭제 후 자동 새로고침으로 화면 동기화됨

### 🧪 예외 처리
	• 모든 예외는 BaseResponse + BaseResponseStatus 일관된 형식으로 응답

<br>

## 🔐 API 명세
<h3>📡 API 명세</h3>
<table border="1" cellspacing="0" cellpadding="8" style="border-collapse: collapse; text-align: left; width: 100%;">
  <thead style="background-color: #2b2b2b; color: white;">
    <tr>
      <th>Method</th>
      <th>Endpoint</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>POST</td>
      <td><code>api/extensions/custom</code></td>
      <td>커스텀 확장자 등록</td>
    </tr>
    <tr>
      <td>PATCH</td>
      <td><code>api/extensions/{name}/ban/toggle</code></td>
      <td>커스텀 확장자 토글 기능</td>
    </tr>
    <tr>
      <td>DELETE</td>
      <td><code>api/extensions/custom/{name}</code></td>
      <td>커스텀 확장자 삭제(논리삭제)</td>
    </tr>
  </tbody>
</table>
> 모든 요청/응답은 BaseResponse<T> 형태로 반환됩니다.
  
<br>

## DB 구조
<img width="203" alt="image" src="https://github.com/user-attachments/assets/0b86587a-b04c-49c5-b75c-d686b561bb9b" />
<details>
  <summary>DDL</summary>
<pre>
  CREATE TABLE extension_blocker (
      id           BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
      name         VARCHAR(20) NOT NULL UNIQUE,
      type         VARCHAR(20) NOT NULL CHECK (type IN ('FIXED', 'CUSTOM')),
      is_banned    BOOLEAN NOT NULL,
      created_at   TIMESTAMP(6) NOT NULL,
      created_by   BIGINT NOT NULL,
      modified_at  TIMESTAMP(6) NOT NULL,
      modified_by  BIGINT NOT NULL
  );
</pre>
</details>
  
<br>

## 📁 디렉토리 구조
<details>
  <summary>frontend</summary>
  <pre>
	resources
	├── static
	│   ├── css
	│   └── extension
	│   │       └── customChip.css
	│   ├── favicon
	│   │   └── favicon.png
	│   └── js
	│       ├── config
	│       │   └── pathConfig.js
	│       └── extension
	│           ├── common
	│           │   └── utils.js
	│           ├── custom-extension
	│           │   ├── customExtension.api.js
	│           │   ├── customExtensionUI.js
	│           │   └── initCustomExtension.js
	│           └── fixed-extension
	│               ├── fixedExtension.api.js
	│               ├── fixedExtensionUI.js
	│               └── initFixedExtension.js
	└── templates
	    ├── buttons
	    │   └── customExtensionAddButton.html
	    ├── fragments
	    │   ├── customChip.html
	    │   └── fixedExtensionCheckBox.html
	    ├── index.html
	    └── inputs
		└── customExtensionInput.html
  </pre>
</details>

<details>
  <summary>backend</summary>
  <pre>
	extensionBlocker
	├── common
	│   ├── baseException
	│   │   ├── BaseException.java
	│   │   └── GlobalExceptionHandler.java
	│   ├── baseResponse
	│   │   ├── BaseResponse.java
	│   │   └── BaseResponseStatus.java
	│   └── BaseTimeEntity.java
	├── config
	│   ├── auditor
	│   │   └── AuditorAwareImpl.java
	│   └── mapper
	│       └── ModelMapperConfig.java
	├── controller
	│   ├── api
	│   │   └── ExtensionBlockerAPIController.java
	│   └── view
	│       └── ExtensionBlockerViewController.java
	├── domain
	│   ├── ExtensionBlocker.java
	│   └── ExtensionType.java
	├── dto
	│   ├── ExtensionBlockerDTO.java
	│   ├── ExtensionBlockerResponseDTO.java
	│   └── RequestDTO.java
	├── ExtensionBlockerApplication.java
	├── repository
	│   └── ExtensionBlockerRepository.java
	└── service
	    └── ExtensionBlockerService.java
  </pre>
</details>
